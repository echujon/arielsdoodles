{{ define "main" }}
<style>
.calendar-images-container {
    display: flex;
    flex-direction: column;
    gap: 1.5em;
    margin: 0 auto 2em auto;
    max-width: 1200px;
}

.calendar-image {
    width: 100%;
}

.cat-calendar-preorder-image {
    width: 100%;
    height: auto;
    border-radius: 8px;
}

@media (min-width: 768px) {
    .calendar-images-container {
        flex-direction: row;
        gap: 2em;
    }

    .calendar-image {
        flex: 1;
    }

    .calendar-form-container {
        max-width: 500px;
        margin: 0 auto;
    }
}
</style>
<section class="aling-center">
    <div class="inner">
        <h1 class="titlebar doodles-font">{{.Title}}</h1>
    </div>
</section>

<section class="wrapper style1 align-center">
    <div class="inner">
        {{with .Params.images}}
        <div class="calendar-images-container">
            {{with .image_1}}
            <div class="calendar-image">
                {{ partial "webpImage.html" (dict
                    "image" .
                    "alt" "2026 Cat Calendar Cover"
                    "class" "cat-calendar-preorder-image"
                    "quality" 90
                    ) }}
            </div>
            {{end}}
            {{with .image_2}}
            <div class="calendar-image">
                {{ partial "webpImage.html" (dict
                    "image" .
                    "alt" "2026 Cat Calendar Back Cover"
                    "class" "cat-calendar-preorder-image"
                    "quality" 90
                    ) }}
            </div>
            {{end}}
        </div>
        {{ else }}
        <p style="color: red;">DEBUG: Images not found - .Params.images is empty</p>
        {{ end }}
        <div class="calendar-description">
            {{ if .Params.soldOut }}
            <p><b>Thanks for your support! We have sold out of our 2026 Cat Calendars!!!</b></p>
            <p>Please subscribe to our <a href="#subscribe">mailing list</a> to get notified about our new products and upcoming events!</p>
            {{ else }}
            <p>Reserve your pre-order 2026 Cat Calendar! Fill out the form below to reserve one or more calendars.</p>
            <p>Each calendar will be 12" x 12" and cost $35 (not including shipping).</p>
            <p><b>Reserve now to get your calendars for just $30 each â€” save $5 per calendar!</b></p>
            {{ end }}
        </div>
        {{ if not .Params.soldOut }}
        <div class="calendar-form-container">

        {{/* Define custom fields for calendar reservation */}}
        {{ $calendarFields := slice
            (dict "name" "formType" "type" "hidden" "value" "preorder")
            (dict "name" "name" "label" "Name" "type" "text" "required" true )
            (dict "name" "email" "label" "Email" "type" "email" "required" true )
            (dict "name" "quantity" "label" "How many calendars?" "type" "number" "required" true "min" 1 "max" 1000)
        }}

        {{/* Call contact form partial with custom configuration */}}
        {{ partial "contactForm" (dict
            "fields" $calendarFields
            "submitText" "Reserve Calendar(s)"
            "workerURL" site.Params.workerURL
            "skipTurnstile" true
        ) }}
        </div>
        {{ end }}
    </div>
</section>
{{end}}
